version: "3.0"

services:
  frontend:
    build: frontend
    image: dipweb.azurecr.io/dipweb-front
    ports:
      - 80:80
    depends_on:
      - backend
    volumes:
        - ./storage:/storage
    environment:
      - STREAMLIT_SERVER_PORT=80
    network_mode: "host"
  backend:
    build: backend
    image: dipweb.azurecr.io/dipweb-back
    ports:
      - 8080:8080
    volumes:
      - ./storage:/storage
    network_mode: "host"

#   # FastAPI
#   # api:
#   #   container_name: "api"
#   #   build: .
#   #   restart: always
#   #   tty: true
#   #   ports:
#   #     - 8000:8000